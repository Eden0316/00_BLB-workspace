--------------- 장바구니 ---------------

-- 더미데이터
-- 회원등급
INSERT INTO TB_GRADE (GRADE_NAME, MIN_POINT, MAX_POINT) VALUES ('BABY', 0, 99);
INSERT INTO TB_GRADE (GRADE_NAME, MIN_POINT, MAX_POINT) VALUES ('SILVER', 100, 499);
INSERT INTO TB_GRADE (GRADE_NAME, MIN_POINT, MAX_POINT) VALUES ('GOLD', 500, 999);
INSERT INTO TB_GRADE (GRADE_NAME, MIN_POINT, MAX_POINT) VALUES ('PLATINUM', 1000, 4999);
INSERT INTO TB_GRADE (GRADE_NAME, MIN_POINT, MAX_POINT) VALUES ('DIAMOND', 5000, 10000);
--회원
INSERT INTO TB_MEMBER (MEMBER_ID, MEMBER_NAME, MEMBER_PWD, PHONE, EMAIL, BIRTHDATE, CREATE_DATE, DELETE_DATE, STATUS, TOTAL_POINTS, CURRENT_POINTS, GRADE_NAME)
VALUES ('user1', 'Member1', 'password1', '01000001000', 'user1@example.com', '1990-01-01', '2023-12-01', NULL, 'Y', 100, 50, 'BABY');
INSERT INTO TB_MEMBER (MEMBER_ID, MEMBER_NAME, MEMBER_PWD, PHONE, EMAIL, BIRTHDATE, CREATE_DATE, DELETE_DATE, STATUS, TOTAL_POINTS, CURRENT_POINTS, GRADE_NAME)
VALUES ('user2', 'Member2', 'password2', '01000001001', 'user2@example.com', '1992-02-02', '2023-12-01', NULL, 'Y', 200, 100, 'SILVER');
INSERT INTO TB_MEMBER (MEMBER_ID, MEMBER_NAME, MEMBER_PWD, PHONE, EMAIL, BIRTHDATE, CREATE_DATE, DELETE_DATE, STATUS, TOTAL_POINTS, CURRENT_POINTS, GRADE_NAME)
VALUES ('user3', 'Member3', 'password3', '01000001002', 'user3@example.com', '1994-03-03', '2023-12-01', NULL, 'Y', 300, 150, 'GOLD');
INSERT INTO TB_MEMBER (MEMBER_ID, MEMBER_NAME, MEMBER_PWD, PHONE, EMAIL, BIRTHDATE, CREATE_DATE, DELETE_DATE, STATUS, TOTAL_POINTS, CURRENT_POINTS, GRADE_NAME)
VALUES ('user4', 'Member4', 'password4', '01000001003', 'user4@example.com', '1996-04-04', '2023-12-01', NULL, 'Y', 400, 200, 'PLATINUM');
INSERT INTO TB_MEMBER (MEMBER_ID, MEMBER_NAME, MEMBER_PWD, PHONE, EMAIL, BIRTHDATE, CREATE_DATE, DELETE_DATE, STATUS, TOTAL_POINTS, CURRENT_POINTS, GRADE_NAME)
VALUES ('user5', 'Member5', 'password5', '01000001004', 'user5@example.com', '1998-05-05', '2023-12-01', NULL, 'Y', 500, 250, 'DIAMOND');
-- 상품
INSERT INTO TB_PRODUCT (PROD_NO, CATEGORY_NAME, PROD_NAME, PROD_CONTENT, PROD_PRICE, PROD_ORIGIN, PROD_CAUTION, PROD_COUNT, PROD_ENROLL_DATE, PROD_STATUS)
VALUES (101, 'CategoryA', 'Product1', 'Description of Product1', 1000, 'Korea', 'Keep away from fire', 50, '2023-12-01', 'Y');
INSERT INTO TB_PRODUCT (PROD_NO, CATEGORY_NAME, PROD_NAME, PROD_CONTENT, PROD_PRICE, PROD_ORIGIN, PROD_CAUTION, PROD_COUNT, PROD_ENROLL_DATE, PROD_STATUS)
VALUES (102, 'CategoryB', 'Product2', 'Description of Product2', 2000, 'USA', 'Handle with care', 20, '2023-12-01', 'N');
INSERT INTO TB_PRODUCT (PROD_NO, CATEGORY_NAME, PROD_NAME, PROD_CONTENT, PROD_PRICE, PROD_ORIGIN, PROD_CAUTION, PROD_COUNT, PROD_ENROLL_DATE, PROD_STATUS)
VALUES (103, 'CategoryC', 'Product3', 'Description of Product3', 3000, 'China', 'Not suitable for children', 35, '2023-12-01', 'Y');
INSERT INTO TB_PRODUCT (PROD_NO, CATEGORY_NAME, PROD_NAME, PROD_CONTENT, PROD_PRICE, PROD_ORIGIN, PROD_CAUTION, PROD_COUNT, PROD_ENROLL_DATE, PROD_STATUS)
VALUES (104, 'CategoryD', 'Product4', 'Description of Product4', 4000, 'Germany', 'Store in a cool place', 10, '2023-12-01', 'Y');
INSERT INTO TB_PRODUCT (PROD_NO, CATEGORY_NAME, PROD_NAME, PROD_CONTENT, PROD_PRICE, PROD_ORIGIN, PROD_CAUTION, PROD_COUNT, PROD_ENROLL_DATE, PROD_STATUS)
VALUES (105, 'CategoryE', 'Product5', 'Description of Product5', 5000, 'Japan', 'Fragile - handle carefully', 5, '2023-12-01', 'N');
-- 옵션
INSERT INTO TB_OPTION (OPT_NO, OPT_NAME, OPT_VALUE, OPT_ADD_PRICE, REMAIN_QTY, PROD_NO)
VALUES (1, 'Option1', 'Value1', 10, 100, 101);
INSERT INTO TB_OPTION (OPT_NO, OPT_NAME, OPT_VALUE, OPT_ADD_PRICE, REMAIN_QTY, PROD_NO)
VALUES (2, 'Option2', 'Value2', 20, 200, 102);
INSERT INTO TB_OPTION (OPT_NO, OPT_NAME, OPT_VALUE, OPT_ADD_PRICE, REMAIN_QTY, PROD_NO)
VALUES (3, 'Option3', 'Value3', 30, 150, 103);
INSERT INTO TB_OPTION (OPT_NO, OPT_NAME, OPT_VALUE, OPT_ADD_PRICE, REMAIN_QTY, PROD_NO)
VALUES (4, 'Option4', 'Value4', 40, 50, 104);
INSERT INTO TB_OPTION (OPT_NO, OPT_NAME, OPT_VALUE, OPT_ADD_PRICE, REMAIN_QTY, PROD_NO)
VALUES (5, 'Option5', 'Value5', 50, 75, 105);
-- 장바구니
INSERT INTO TB_CART (CART_NO, MEMBER_ID, PROD_NO, OPT_NO, CART_QTY) VALUES (SEQ_CART_NO.NEXTVAL, 'user1', 101, 1, 3);
INSERT INTO TB_CART (CART_NO, MEMBER_ID, PROD_NO, OPT_NO, CART_QTY) VALUES (SEQ_CART_NO.NEXTVAL, 'user2', 102, 2, 1);
INSERT INTO TB_CART (CART_NO, MEMBER_ID, PROD_NO, OPT_NO, CART_QTY) VALUES (SEQ_CART_NO.NEXTVAL, 'user3', 103, 3, 3);
INSERT INTO TB_CART (CART_NO, MEMBER_ID, PROD_NO, OPT_NO, CART_QTY) VALUES (SEQ_CART_NO.NEXTVAL, 'user4', 104, 4, 9);
INSERT INTO TB_CART (CART_NO, MEMBER_ID, PROD_NO, OPT_NO, CART_QTY) VALUES (SEQ_CART_NO.NEXTVAL, 'user5', 105, 5, 5);
COMMIT;

-- 1. 장바구니 전체 개수 조회용 쿼리문
SELECT COUNT(*)
  FROM TB_CART
 WHERE CART_QTY >= 1
 
-- 2. 장바구니 목록 조회용 쿼리문
SELECT C.CART_NO
     , C.MEMBER_ID
     , C.PROD_NO
     , O.OPT_NAME
     , C.CART_QTY
  FROM TB_CART C
  LEFT JOIN TB_OPTION O USING(OPT_NO)
 WHERE MEMBER_ID = 'user1'
 ORDER BY CART_NO DESC