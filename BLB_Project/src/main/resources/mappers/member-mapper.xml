<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">
<resultMap id="memberResultSet"	type="member">
 		<id column="MEMBER_ID" property="memberId"/>
 		<result column="MEMBER_PWD" property="memberPwd" />
 		<result column="MEMBER_NAME" property="memberName" />
 		<result column="PHONE" property="phone" />
 		<result column="EMAIL" property="email" />
 		<result column="BIRTHDATE" property="birthdate" /> 		
 		<result column="CREATE_DATE" property="createDate" />
 		<result column="DELETE_DATE" property="deleteDate" />
 		<result column="STATUS" property="status" />
 		<result column="TOTAL_POINTS" property="totalPoints" />
 		<result column="CURRENT_POINTS" property="currentPoints" />
 		<result column="GRADE_NAME" property="gradeName" />
 	</resultMap>
	
	<select id="loginMember"
			parameterType="member"
			resultMap="memberResultSet">
		SELECT *
		  FROM TB_MEMBER
		  WHERE MEMBER_ID = #{memberId}
		   AND STATUS='y'
	</select>
	
	<insert id="insertMember" parameterType="member">
	  	INSERT INTO TB_MEMBER (MEMBER_ID
	                       ,MEMBER_NAME
	                       ,MEMBER_PWD
	                       ,PHONE
	                       ,EMAIL
	                       ,BIRTHDATE)                                                                                             
	                  VALUES(#{memberId}
	                        ,#{memberName}
	                        ,#{memberPwd}
	                        ,#{phone}
	                        ,#{email}
	                        ,#{birthdate})            
  	</insert>

	<select id="idCheck" parameterType="string" resultType="_int">
		SELECT COUNT(*)
		  FROM TB_MEMBER
		  WHERE MEMBER_ID = #{checkId}
	</select>
	
	<insert id="insertDelivery" parameterType="delivery">
	  	  INSERT INTO TB_DELIVERY (
							    DELI_CODE,
							    DELI_NAME,
							    DELI_PHONE,
							    POSTCODE,
							    DELI_ADDRESS,
							    DETAIL_ADDRESS,
							    MEMBER_ID
							)
							VALUES (
							    SEQ_DELI_CODE.NEXTVAL,
							    #{deliName},
							    #{deliPhone},
							    #{postcode},
							    #{deliAddress},
							    #{detailAddress},
							    #{memberId}
			)       
  	</insert>

</mapper>
